!function(e,t){"use strict";var n=e.isObject;e.module("restmod").factory("DebouncedModel",["restmod","$timeout","$q",function(e,r,i){function o(e,t,n,r){return function(){var i=e.$promise;e.$promise=r,t.call(e).$promise.then(function(t){n.resolve(t),e.$promise=i},function(t){n.reject(t),e.$promise=i}),e.$dmStatus=null}}return e.mixin(function(){this.setProperty("dmTimeout",500).setProperty("dmAdjourn",!0).define("$save",function(e){var a=this.$type.getProperty("dmTimeout"),s=this.$type.getProperty("dmAdjourn"),u=this.$dmStatus;if(e!==t&&n(e)&&(e.timeout!==t&&(a=e.timeout),e.adjourn!==t&&(s=e.adjourn)),u)s&&(r.cancel(u.timeout),a?u.timeout=r(u.save,a):u.save()),this.$promise=u.promise;else{if(!a)return this.$super();var l=i.defer(),c=o(this,this.$super,l,this.$promise);this.$dmStatus={save:c,promise:l.promise,timeout:r(c,a)},this.$promise=l.promise}return this}).define("$saveNow",function(){return this.$save({timeout:0,adjourn:!0})})})}])}(angular);