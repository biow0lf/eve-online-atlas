!function(e,t){"use strict";e.module("restmod").factory("restmod.Preload",["restmod","$q",function(t,n){function r(e,t){for(var r=[],i=0;i<e.length;i++)r.push(e[i].$resolve(t).$asPromise());return n.all(r)}function i(t,i,o){for(var a,s=[],u=0,l=t.length;l>u;u++)a=t[u][i],e.isArray(a)?s.push.apply(s,a):a&&s.push(a);if(s.length>0){var c="function"==typeof s[0].$type.$populate?s[0].$type.$populate(s,o).$asPromise():r(s,o);if(c)return c.then(function(){return s})}return n.when(s)}function o(e,t){return function(n){return i(n,e,t)}}return t.mixin(function(){this.define("Resource.$preload",function(){var e=arguments;return this.$always(function(){for(var t,r,a,s,u={},l=[],c=this.$isCollection?this:[this],f=0;f<e.length;f++){var p,d=e[f];if("object"==typeof d&&(p=d.params,d=d.path),!u[d]){t="",d=d.split("."),s=null;for(var h=0;h<d.length;h++)r=d[h],a=t+"."+r,u[a]?s=u[a]:(s=s?s.then(o(r,p)):i(c,r,p),u[a]=s);l.push(s)}}return n.all(l)})})})}])}(angular);