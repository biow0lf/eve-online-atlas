"use strict";function copyFile(e,t){return _.partial(fs.copy,e,t)}function isAlias(e){return _.has(mapping.aliasToReal,e)}function isCategory(e){return _.includes(categories,e)}function isThru(e){return!_.includes(aryMethods,e)}function getTemplate(e){var t={name:_.result(mapping.aliasToReal,e,e),mapping:mapping};return isAlias(e)?template.alias(t):isCategory(e)?template.category(t):isThru(e)?template.thru(t):template.module(t)}function writeFile(e,t){return _.partial(fs.writeFile,e,t)}function onComplete(e){if(e)throw e}function build(e){e=path.resolve(e);var t=path.join(e,"fp"),n=glob.sync(path.join(e,"*.js"),{nodir:!0,ignore:ignored.map(function(t){return path.join(e,t)})});_.each([mapping.aliasToReal,mapping.remap],function(t){_.forOwn(t,function(t,r){var i=path.join(e,r+".js");_.startsWith(r,"_")||_.includes(n,i)||n.push(i)})});var r=n.map(function(e){var n=path.basename(e,".js");return writeFile(path.join(t,n+".js"),getTemplate(n))});r.unshift(copyFile(path.join(__dirname,"../../fp"),t)),r.push(writeFile(path.join(e,"fp.js"),template.fp())),r.push(writeFile(path.join(t,"convert.js"),template.convert())),r.push(writeFile(path.join(t,"_util.js"),template._util())),async.series(r,onComplete)}var _=require("lodash"),async=require("async"),fs=require("fs-extra"),glob=require("glob"),path=require("path"),util=require("../common/util"),mapping=require("../../fp/_mapping"),templatePath=path.join(__dirname,"template/modules"),template=util.globTemplate(path.join(templatePath,"*.jst")),aryMethods=_.union(mapping.aryMethod[1],mapping.aryMethod[2],mapping.aryMethod[3],mapping.aryMethod[4]),categories=["array","collection","date","function","lang","math","number","object","seq","string","util"],ignored=["_*.js","core.js","fp.js","index.js","lodash.js"];build(_.last(process.argv));